---
title: How to create a blog in Next.js with Fumadocs — Part 1
description: Creating a blog site with Fumadocs in Next.js.
date: 2024-10-05 12:00
author: Enoabasi Essien
published: true
category: Software Engineering
---

Over the course of my journey in software development while learning Next.js and making a bunch of websites for customers. I never had the chance to create a blog, they did not need it but I wanted to spread the things I learn from my experiences to the world, I decided why not build a blog?

There are many ways to handle static content in Next.js. The framework provides a [Configuring: MDX](https://nextjs.org/docs/app/building-your-application/configuring/mdx) guide. I wanted a way to handle content without having to do the manual labor. There came [Fumadocs](https://fumadocs.vercel.app/docs/ui), a documentation framework with excellent user interface and user experience, powered by Next.js on the app router.

## Why did I choose Fumadocs?

It is a documentation framework tailored to building docs for websites but it comes with packages that allow for headless content management with markdown, and [markdownX](https://mdxjs.com/). The framework is separated in 3 core parts:

- Core
- UI
- MDX.

These packages serve as the core structure of organizing, styling, and displaying content via markdown. With that said, the goal of this post is to work you through the process of using Fumadocs to create a blog coupled with Next.js’s features for handling static data.

## Step 1 — Creating the application

I started of by creating the application using the Next.js CLI. Removing the boilerplate code by Next.js.

```sh title="terminal"
pnpm dlx create-next-app@latest
```

## Step 2 — Installing Shadcn/ui for components and styling

For fast prototyping, I use [Shadcn/ui](https://ui.shadcn.com/) which is a set of components built using [Radix-ui](https://www.radix-ui.com/) and [Tailwindcss](https://tailwindcss.com/) for React. It is basically copy and paste giving me control of the underlying implementation of each component.

```sh title="terminal"
pnpm dlx shadcn@latest
```

## Step 3 — Setting up Fumadocs framework

### Setting up the Fumadocs content source

Fumadocs content source are divided into 2 parts.

1. Fumadocs MDX
2. [Content collections](https://www.content-collections.dev/).

I went with Fumadocs MDX, it is the recommend by the documentation.

```sh title="terminal"
pnpm add fumadocs-mdx @types/mdx
```

### Configuring `next.config.mjs` to work with Fumadocs

We wrap our `config` with Fumadocs `createMDX()` . This will generate the data needed for handling our content.

```tsx title="next.config.ts"
import { createMDX } from 'fumadocs-mdx/next';

const withMDX = createMDX();

/** @type {import('next').NextConfig} */
const config = {
  reactStrictMode: true,
};

export default withMDX(config);
```

After, launch the dev server `pnpm dev` to generate the `.source` folder. It is advised to add the `.source` folder to your `.gitignore` as it contains parsed files that are quite large.

### Configuring Fumadocs MDX source, `source.config.ts`

In the root directory of your project, create a `source.config.ts` file. This file manages all configurations needed for Fumadocs to work across all its underlying packages. You can define collections, plugins, and more here. To read more about the config, [read more](https://fumadocs.vercel.app/docs/mdx/configuration).

In this file, I am defining the collection for the blog, to read more about defining collections, [read more](https://fumadocs.vercel.app/docs/mdx/configuration#schema).

```tsx title="source.config.ts"
import {
  defineCollections,
  defineConfig,
  frontmatterSchema,
} from 'fumadocs-mdx/config';

import { remarkImage } from 'fumadocs-core/mdx-plugins';
import { z } from 'zod';

export const blog = defineCollections({
  type: 'doc',
  dir: './content/blog',
  schema: frontmatterSchema.extend({
    author: z.string(),
    date: z.string().or(z.date()).optional(),
    published: z.boolean().default(true),
  }),
});

export default defineConfig({
  mdxOptions: {
    remarkPlugins: [remarkImage],
  },
});
```

Note, I added a `published` to be applied to all `posts` . This will be useful for previewing posts before they are published for production.

### Configuring the Source API, `source.ts`

The `source.ts` contains the loader for fetching the data of your markdown files. It should be placed in the `app` directory.

```tsx title="app/source.ts"
import { loader } from 'fumadocs-core/source';
import { blog as articles } from '@/.source';

import { createMDXSource } from 'fumadocs-mdx';

export const blog = loader({
  baseUrl: '/blog',
  source: createMDXSource(articles, []),
});
```

## Step 4 — Using the content data in your app

Before using the data in your project, I have created a some utility functions for styling purposes.

```ts title="lib/focuses.ts"
export const focusRing =
  'ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-tertiary focus-visible:ring-offset-2';
```

- ### Sorting posts by their date

In your `blog/page.tsx` , create a function `getData()` . This will retrieve all our content and sort them by their date and time created.

```tsx title="blog/page.tsx"
import { blog } from '@/app/source';

type Blog = typeof blog;

function getData(content: Blog) {
  return [...content.getPages()].sort(
    (a, b) =>
      new Date(b.data.date ?? b.file.name).getTime() -
      new Date(a.data.date ?? a.file.name).getTime()
  );
}

export default function Page() {
  const data = getData(blog); // usuage // [!code highlight]

  return <>{/* rest of component */}</>;
}
```

- ### Displaying the posts

For displaying the posts, remember we created a `published` flag. This flag will display only the posts that have `published` set to `true`. This is very useful for previewing posts that are not yet published.

```tsx title="blog/page.tsx"
<section className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4">
  {data.map((post) => (
    <React.Fragment key={post.url}>
      {post.data.published ? (
        <Link
          href={post.url}
          className={cn(
            'flex flex-col p-4 transition-colors border border-t-0',
            'bg-card hover:bg-accent hover:text-accent-foreground',
            'focus-visible:ring-offset-0',
            focusRing
          )}
        >
          <p className="font-medium">{post.data.title}</p>
          <p className="muted">{post.data.description}</p>

          <p className="pt-4 mt-auto text-xs text-muted-foreground">
            {new Date(post.data.date ?? post.file.name).toDateString()}
          </p>
        </Link>
      ) : null}
    </React.Fragment>
  ))}
</section>
```
